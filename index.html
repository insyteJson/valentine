<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine?</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ffc8fd 0%, #ffb6c1 50%, #ffa0b4 100%);
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', cursive, sans-serif;
            overflow: hidden;
        }

        .container {
            text-align: center;
            padding: 20px;
            max-width: 500px;
        }

        h1 {
            color: #e31b5f;
            font-size: 2.2rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            line-height: 1.4;
        }

        .name {
            color: #c41e56;
            font-weight: bold;
        }

        .gif-container {
            margin: 20px 0;
        }

        .gif-container img {
            max-width: 280px;
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        button {
            padding: 15px 40px;
            font-size: 1.3rem;
            font-family: inherit;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .yes-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .yes-btn:hover {
            background: linear-gradient(135deg, #45a049, #3d8b40);
            transform: scale(1.05);
        }

        .no-btn {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }

        .no-btn:hover {
            background: linear-gradient(135deg, #d32f2f, #b71c1c);
        }

        .footer {
            margin-top: 30px;
            color: #c41e56;
            font-size: 1.1rem;
        }

        .success-container {
            display: none;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        .success-container h1 {
            font-size: 2.5rem;
            margin-bottom: 25px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1); }
            75% { transform: scale(1.1); }
        }

        .heart-float {
            position: fixed;
            font-size: 2rem;
            animation: floatUp 4s ease-in forwards;
            pointer-events: none;
            z-index: 1000;
        }

        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) rotate(360deg);
            }
        }

        .hearts-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }

        .floating-heart {
            position: absolute;
            opacity: 0.3;
            animation: floatAround 6s ease-in-out infinite;
        }

        @keyframes floatAround {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }
    </style>
</head>
<body>
    <div class="hearts-bg" id="heartsBg"></div>

    <div class="container" id="questionContainer">
        <h1><span class="name" id="recipientName">My Love</span>, will you be my valentine? <span id="heartEmoji">üíù</span></h1>

        <div class="gif-container">
            <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" alt="Cute bear with heart" id="mainGif">
        </div>

        <div class="buttons">
            <button class="yes-btn" id="yesBtn" onclick="sayYes()">Yes!</button>
            <button class="no-btn" id="noBtn" onclick="sayNo()">No :(</button>
        </div>

            </div>

    <div class="success-container" id="successContainer">
        <h1>Yaaay! I can't wait! üíñ</h1>
        <div class="gif-container">
            <img src="https://media.giphy.com/media/IzcFv6WJ4310k/giphy.gif" alt="Love celebration">
        </div>
        <p class="footer" style="font-size: 1.5rem; margin-top: 20px;">You just made me the happiest person! ü•∞</p>
    </div>

    <script>
        // Parse URL parameters (name and email are base64 encoded)
        const urlParams = new URLSearchParams(window.location.search);
        const encodedName = urlParams.get('n');
        const encodedEmail = urlParams.get('em');

        let recipientName = 'My Love';
        let notifyEmail = null;

        if (encodedName) {
            try {
                recipientName = atob(encodedName);
                document.getElementById('recipientName').textContent = recipientName;
            } catch (e) {
                document.getElementById('recipientName').textContent = encodedName;
            }
        }

        if (encodedEmail) {
            try {
                notifyEmail = atob(encodedEmail);
            } catch (e) {
                // Invalid base64, ignore
            }
        }

        // Create floating hearts background
        function createBackgroundHearts() {
            const container = document.getElementById('heartsBg');
            const hearts = ['üíï', 'üíó', 'üíì', 'üíñ', 'üíò', '‚ù§Ô∏è', 'üíû'];

            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('span');
                heart.className = 'floating-heart';
                heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.top = Math.random() * 100 + '%';
                heart.style.fontSize = (Math.random() * 30 + 20) + 'px';
                heart.style.animationDelay = Math.random() * 6 + 's';
                heart.style.animationDuration = (Math.random() * 4 + 4) + 's';
                container.appendChild(heart);
            }
        }

        createBackgroundHearts();

        let yesScale = 1;
        let noScale = 1;
        let noClickCount = 0;

        const noMessages = [
            "No :(",
            "Are you sure?",
            "Really sure?",
            "Think again!",
            "Last chance!",
            "Surely not?",
            "You might regret this!",
            "Give it another thought!",
            "Are you being serious?",
            "This is so sad!",
            "Don't do this to me!",
            "I'm gonna cry...",
            "You're breaking my heart!",
            "I refuse to believe this!",
            "That's not an option!",
            "Click the other button!"
        ];

        function sayNo() {
            noClickCount++;
            yesScale += 0.25;
            noScale = Math.max(0.5, noScale - 0.1);

            const yesBtn = document.getElementById('yesBtn');
            const noBtn = document.getElementById('noBtn');

            yesBtn.style.transform = `scale(${yesScale})`;
            noBtn.style.transform = `scale(${noScale})`;

            // Change no button text
            if (noClickCount < noMessages.length) {
                noBtn.textContent = noMessages[noClickCount];
            } else {
                noBtn.textContent = "Just click Yes!";
            }

            // Create floating heart on no click
            createFloatingHeart();
        }

        function sayYes() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('successContainer').style.display = 'block';

            // Send email notification if email is provided
            if (notifyEmail) {
                sendNotification();
            }

            // Celebration hearts
            for (let i = 0; i < 30; i++) {
                setTimeout(() => createFloatingHeart(), i * 100);
            }
        }

        function sendNotification() {
            const message = `${recipientName} said YES! üíñ\n\nThey clicked "No" ${noClickCount} time(s) before saying yes.`;

            // Using formsubmit.co - a free email service
            fetch(`https://formsubmit.co/ajax/${notifyEmail}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({
                    _subject: 'üíñ Valentine Response - They said YES!',
                    name: recipientName,
                    message: message,
                    noClicks: noClickCount
                })
            }).catch(() => {
                // Silent fail - don't disrupt the celebration
            });
        }

        function createFloatingHeart() {
            const hearts = ['üíï', 'üíó', 'üíì', 'üíñ', 'üíò', '‚ù§Ô∏è', 'üíû', 'üíù', 'ü•∞', 'üòç'];
            const heart = document.createElement('span');
            heart.className = 'heart-float';
            heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.bottom = '0';
            document.body.appendChild(heart);

            setTimeout(() => heart.remove(), 4000);
        }

        // Add some sparkle to the heart emoji
        setInterval(() => {
            const heartEmoji = document.getElementById('heartEmoji');
            if (heartEmoji) {
                heartEmoji.style.animation = 'heartBeat 0.5s ease';
                setTimeout(() => {
                    heartEmoji.style.animation = '';
                }, 500);
            }
        }, 2000);
    </script>
</body>
</html>
